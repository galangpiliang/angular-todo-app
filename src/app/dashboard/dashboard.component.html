<div class="bg-4 text-black h-100">
  <div class="modal flex w-100 h-100" *ngIf="toggle['modalProfile']">
    <div class="modal-content align-center m-auto flex flex-col minw-30 br">
      <h1>Update Profile</h1>
      <input id="userName" type="text" class="form-input w-100" />
      <input id="userEmail" type="email" class="form-input w-100" />
      <div class="wrapper flex">
        <button class="btn mt-1" (click)="doToggle('modalProfile')">
          Close
        </button>
        <button class="btn mt-1 ml-1">Update</button>
      </div>
    </div>
  </div>

  <div class="modal flex w-100 h-100" *ngIf="toggle['modalUpload']">
    <div class="modal-content align-center m-auto flex flex-col minw-30 br">
      <h1>Upload Image</h1>
      <input id="userImage" type="file" class="form-input w-100" />
      <div class="wrapper flex">
        <button class="btn mt-1">Close</button>
        <button class="btn mt-1 ml-1">Upload</button>
      </div>
    </div>
  </div>

  <div class="flex justify-sb bg-1 text-white h-10 align-center">
    <h3 class="mx-2">[ Team B ] - doDo</h3>
    <div class="wrapper flex">
      <!-- <h4 class="hover" (click)="doToggle('modalProfile')">
        <span>Update Profile</span>
      </h4> -->
      <h4 class="hover mx-2" (click)="doLogout()"><span>SIGN OUT</span></h4>
    </div>
  </div>

  <div class="flex h-90 croll">
    <div
      class="left h-fit p-1 flex flex-col w-30 w-tablet-auto text-center justify-center"
    >
      <div class="profile-image relative">
        <img
          class="circle m-auto h-10rem mw-10 mt-1 obj-cover"
          [src]="dataUser && dataUser.image"
          alt="Profile"
        />
        <div class="overlay br">
          <button class="btn my-1">Change Image</button>
        </div>
      </div>
      <h2>{{ dataUser.fullname }}</h2>
      <button class="btn my-1">All Task</button>
      <button class="btn my-1">Important</button>
      <button class="btn my-1">Complete</button>
    </div>
    <div class="right flex-grow flex flex-col text-color-3 pr-2">
      <form
        class="wrapper flex align-center mt-2"
        (ngSubmit)="doAddTask()"
        #addTaskForm="ngForm"
      >
        <input
          name="task"
          class="form-input flex-grow ml-0 clear-ng-invalid"
          type="text"
          placeholder="add task..."
          ngModel
          required
        />
        <button class="btn" [disabled]="!addTaskForm.valid || isLoading">
          Add Task
        </button>
      </form>
      <div class="wrapper flex-grow text-black scroll">
        <ul class="p-0">
          <li class="bg-white br" *ngIf="isLoading">
            <app-loading-spinner class="m-auto"></app-loading-spinner>
          </li>
        </ul>

        <ul class="p-0">
          <h4 class="text-center" *ngIf="!isLoading && dataTasks.length <= 0">
            Task is empty, let's create a task using the input form above...
          </h4>

          <!-- Looping Tasks Data -->
          <li *ngFor="let task of dataTasks">
            <app-loading-spinner
              class="m-auto flex align-center bg-white br px-1 my-1"
              *ngIf="singleLoading === task._id"
            ></app-loading-spinner>

            <div
              class="flex align-center bg-white br px-1 my-1"
              *ngIf="!toggle[task._id] && singleLoading !== task._id"
            >
              <button class="btn btn-sm px-1" (click)="doCompleteTask(task)">
                <fa-icon
                  [icon]="task.completion ? faCheck : farCircle"
                ></fa-icon>
              </button>
              <p
                class="mx-1 text-ellipsis"
                [ngClass]="{'text-strike': task.completion}"
              >
                {{task.title}}
              </p>
              <button class="btn btn-sm px-1" (click)="doImportanceTask(task)">
                <fa-icon
                  [icon]="task.importanceLevel > 1 ? faStar : farStar"
                ></fa-icon>
              </button>
              <button class="btn btn-sm mx-1 px-1" (click)="doToggle(task)">
                <fa-icon [icon]="faEdit"></fa-icon>
              </button>
              <button class="btn btn-sm px-1" (click)="doDeleteTask(task._id)">
                <fa-icon [icon]="faTrash"></fa-icon>
              </button>
            </div>

            <form
              class="flex align-center bg-white br px-1 my-1"
              *ngIf="toggle[task._id]  && singleLoading !== task._id"
              #formUpdate="ngForm"
            >
              <input
                type="text"
                [name]="task._id"
                [(ngModel)]="input[task._id]"
                class="form-input flex-grow ml-0"
                required
                autofocus
                #focus
              />
              {{ focus.focus() }}
              <button
                class="btn btn-sm px-1"
                type="button"
                (click)="doToggle(task)"
              >
                Cancel
              </button>
              <button
                class="btn btn-sm px-1 ml-1"
                type="submit"
                (click)="doUpdateTask(task)"
                [disabled]="!formUpdate.valid"
              >
                Update
              </button>
            </form>
          </li>
          <!-- End Looping Tasks Data -->
        </ul>
      </div>
      <div class="wrapper flex justify-center">
        <h3 class="text-black mx-1">1</h3>
      </div>
    </div>
  </div>
</div>
